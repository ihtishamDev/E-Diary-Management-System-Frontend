(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[245],{79145:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset_password",function(){return s(40195)}])},40195:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Resetnew_password}});var a=s(85893),r=s(67294),n=s(11163);function Resetnew_password(){let e=(0,n.useRouter)(),{token:t}=e.query,[s,o]=(0,r.useState)(""),[i,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,p]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!1),[x,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!t)return},[t]);let handleReset=async a=>{if(a.preventDefault(),d(""),p(!0),s!==i){d("Passwords do not match"),p(!1);return}try{let a=await fetch("".concat("https://ediary-management-system-production-ed2f.up.railway.app","/auth/resetpassword?token=").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,new_password:s,confirm_password:i})}),n=await a.json().catch(()=>({}));if(a.ok)d(n.message||"Password reset successful!"),setTimeout(()=>e.push("/"),2e3);else{var r;let e=Array.isArray(n.detail)?null===(r=n.detail[0])||void 0===r?void 0:r.msg:"object"==typeof n.detail?JSON.stringify(n.detail):n.detail;d(e||n.message||"Invalid or expired token")}}catch(e){d("Server not responding. Try again later.")}p(!1)};return(0,a.jsx)("div",{className:"bg-[url('/images/dashboard/dashboard_back.png')] bg-no-repeat bg-cover min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-8 w-full max-w-md",children:[(0,a.jsx)("h1",{className:"text-center text-2xl font-bold mb-2",children:"Reset your password"}),(0,a.jsx)("p",{className:"text-center text-gray-600 text-sm mb-6",children:"Enter your new password below."}),(0,a.jsxs)("form",{onSubmit:handleReset,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:h?"text":"password",placeholder:"New password",value:s,onChange:e=>o(e.target.value),required:!0,className:"w-full border-b p-2 outline-none text-sm"}),(0,a.jsx)("span",{onClick:()=>m(!h),className:"absolute right-2 top-2 cursor-pointer text-gray-500 text-sm select-none",children:h?"\uD83D\uDE48 Hide":"\uD83D\uDC41 Show"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:x?"text":"password",placeholder:"Confirm password",value:i,onChange:e=>l(e.target.value),required:!0,className:"w-full border-b p-2 outline-none text-sm"}),(0,a.jsx)("span",{onClick:()=>w(!x),className:"absolute right-2 top-2 cursor-pointer text-gray-500 text-sm select-none",children:x?"\uD83D\uDE48 Hide":"\uD83D\uDC41 Show"})]}),(0,a.jsx)("button",{type:"submit",disabled:u,className:"w-full bg-black text-white py-2 rounded hover:bg-gray-800 transition",children:u?"Resetting...":"Reset Password"})]}),c&&(0,a.jsx)("p",{className:"text-center text-sm mt-3",children:c}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"text-sm text-gray-500 hover:underline",children:"Back to Login"})})]})})}},11163:function(e,t,s){e.exports=s(59974)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=79145)}),_N_E=e.O()}]);