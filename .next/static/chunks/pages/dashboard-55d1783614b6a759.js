(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{81840:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(78889)}])},86629:function(e,t,s){"use strict";s.d(t,{Z:function(){return AddNoteModal}});var a=s(85893),l=s(67294),n=s(34371),components_CategoryDropdown=e=>{let{value:t,onChange:s,className:r=""}=e,[i,c]=(0,l.useState)([]),[d,o]=(0,l.useState)("");(0,l.useEffect)(()=>{let load=async()=>{try{let e=await fetch("".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/getCategory"),{credentials:"include"}),t=await e.json(),s=new Set(t.map(e=>e.category).filter(Boolean));c([...s]),console.log("setCategoriessetCategoriessetCategories",c)}catch(e){console.error("Error loading categories:",e)}};load()},[]);let u=[...i.map(e=>({value:e,label:e})),{value:"custom",label:"Custom"}];return(0,a.jsxs)("div",{className:"w-full ".concat(r),children:[(0,a.jsx)(n.ZP,{classNamePrefix:"react-select",placeholder:"Select or search category",options:u,value:i.includes(t)?{value:t,label:t}:t?{value:"custom",label:"Custom"}:null,onChange:e=>{"custom"===e.value?s(d):s(e.value)},isSearchable:!0,styles:{control:e=>({...e,borderRadius:"0.375rem",padding:"2px 4px"})}}),!i.includes(t)&&t&&(0,a.jsx)("input",{type:"text",placeholder:"Enter custom category",className:"mt-2 w-full border px-3 py-2 rounded",value:d||t,onChange:e=>{o(e.target.value),s(e.target.value)}})]})};function AddNoteModal(e){let{open:t,onClose:s,onSubmit:n,entry:r,categories:i=[]}=e,[c,d]=(0,l.useState)(""),[o,u]=(0,l.useState)(""),[h,x]=(0,l.useState)("");if((0,l.useEffect)(()=>{r?(d(r.title||""),u(r.category||""),x(r.content||"")):(d(""),u(""),x(""))},[r]),!t)return null;function handleSave(e){e.preventDefault(),n({title:c,category:o,content:h})}return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white w-full max-w-md rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:r?"Edit Note":"Add Note"}),(0,a.jsxs)("form",{onSubmit:handleSave,children:[(0,a.jsx)("input",{className:"w-full border px-3 py-2 mb-4 rounded",placeholder:"Note Title",value:c,onChange:e=>d(e.target.value)}),(0,a.jsx)(components_CategoryDropdown,{value:o,onChange:u}),(0,a.jsx)("textarea",{className:"w-full border px-3 py-2 mb-4 rounded",rows:4,placeholder:"Write your note content...",value:h,onChange:e=>x(e.target.value)}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-2",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",children:r?"Update":"Save"})]})]})]})})}},16837:function(e,t,s){"use strict";var a=s(85893),l=s(11163);t.Z=()=>{let e=(0,l.useRouter)();return(0,a.jsxs)("aside",{className:"w-64 bg-white  relative z-10",children:[(0,a.jsx)("div",{className:"px-6 py-4 text-xl font-bold border-b",children:"e-Diary MS"}),(0,a.jsxs)("nav",{className:"p-4 space-y-2",children:[(0,a.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100 font-medium",children:"Dashboard"}),(0,a.jsx)("button",{onClick:()=>e.push("/categories"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100",children:"Categories"}),(0,a.jsx)("button",{onClick:()=>e.push("/notes"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100",children:"Notes"}),(0,a.jsx)("div",{className:"pt-4 border-t text-sm text-gray-500",children:"PROFILE SETTINGS"}),(0,a.jsx)("button",{onClick:()=>e.push("/changePassword"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100",children:"Change Password"}),(0,a.jsx)("button",{onClick:()=>e.push("/myProfile"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100",children:"My Profile"}),(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100",children:"Logout"})]})]})}},56888:function(e,t,s){"use strict";s.d(t,{Z:function(){return TableSlider}});var a=s(85893),l=s(67294);function TableSlider(e){let{entries:t,entriesPerSlide:s=5,onEdit:n,onDelete:r}=e,[i,c]=(0,l.useState)(0),d=Math.ceil(t.length/s),o=i*s,u=o+s,h=t.slice(o,u);return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mt-4",children:[(0,a.jsxs)("table",{className:"w-full text-left text-sm min-w-[800px] border-separate border-spacing-0l",children:[(0,a.jsx)("thead",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-t-xl",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2",children:"#"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Note Title"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Category"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Content"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Creation Date"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Action"})]})}),(0,a.jsxs)("tbody",{children:[h.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-2",children:o+t+1}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.title}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.category||"-"}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.content||"-"}),(0,a.jsx)("td",{className:"px-4 py-2",children:new Date(e.created_at).toLocaleString("en-PK",{timeZone:"Asia/Karachi"})}),(0,a.jsxs)("td",{className:"px-4 py-2 space-x-2",children:[(0,a.jsx)("button",{onClick:()=>n(e),className:"px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"View"}),(0,a.jsx)("button",{onClick:()=>r(e.id),className:"px-3 py-1 bg-red-500 text-white rounded text-xs",children:"Delete"})]})]},e.id)),0===t.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"px-4 py-6 text-center text-gray-500",children:"No entries found."})})]})]}),t.length>s&&(0,a.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,a.jsx)("button",{onClick:()=>c(e=>Math.max(e-1,0)),disabled:0===i,className:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50",children:"Previous"}),(0,a.jsxs)("span",{children:["Slide ",i+1," of ",d]}),(0,a.jsx)("button",{onClick:()=>c(e=>Math.min(e+1,d-1)),disabled:i===d-1,className:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50",children:"Next"})]})]})}},78889:function(e,t,s){"use strict";s.r(t);var a=s(85893),l=s(16837),n=s(67294),r=s(11163),i=s(86629),c=s(56888);t.default=()=>{let e=(0,r.useRouter)(),[t,s]=(0,n.useState)([]),[d,o]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[x,p]=(0,n.useState)(null),[m,g]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[f,N]=(0,n.useState)([]),[j,w]=(0,n.useState)(null),[v,C]=(0,n.useState)(!1);async function load(){try{let t=await fetch("".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/"),{credentials:"include"});if(401===t.status)return e.push("/");let a=await t.json();s(a);let l=new Date;l.setDate(l.getDate()-7),b(a.filter(e=>new Date(e.created_at)>=l))}catch(e){o(String(e))}}async function categoryload(){try{let t=await fetch("".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/getCategory"),{credentials:"include"});if(401==t.status)return e.push("/");if(404==t.status)return;let s=await t.json();console.log(t,"datadatadata");let a=new Set(s.map(e=>e.category||"Uncategorized"));N([...a]);let l=new Set(s.filter(e=>"active"===e.status).map(e=>e.category||"Uncategorized"));g([...l])}catch(e){o(String(e))}}async function saveEntry(e){let t=x?"".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/").concat(x.id):"".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/EntryData"),s=await fetch(t,{method:x?"PATCH":"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok)await load(),h(!1),p(null);else{let e=await s.json().catch(()=>({}));alert(e.detail||"Error")}}async function deleteEntry(e){try{let t=await fetch("".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/").concat(e),{method:"DELETE",credentials:"include"});t.ok&&await load()}catch(e){o(String(e))}}return(0,n.useEffect)(()=>{load(),categoryload(),console.log("NEXT_PUBLIC_API_BASE:","https://ediary-management-system-production-ed2f.up.railway.app")},[]),(0,a.jsx)("div",{className:"min-h-screen bg-[url('/images/dashboard/dashboard_back.png')] bg-no-repeat bg-cover",children:(0,a.jsxs)("div",{className:"flex min-h-screen",children:[(0,a.jsx)(l.Z,{}),(0,a.jsxs)("main",{className:"flex-1 p-6 relative z-10",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-4 text-black drop-shadow",children:"Dashboard"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-600 text-white rounded-lg p-4 shadow",children:[(0,a.jsx)("div",{className:"text-sm",children:"Listed Categories"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:f.length}),(0,a.jsx)("div",{className:"mt-2 text-sm underline cursor-pointer",onClick:()=>e.push("/categories"),children:"View Details"})]}),(0,a.jsxs)("div",{className:"bg-purple-600 text-white rounded-lg p-4 shadow",children:[(0,a.jsx)("div",{className:"text-sm",children:"Active Categories"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:m.length}),(0,a.jsx)("div",{className:"mt-2 text-sm underline cursor-pointer",onClick:()=>e.push("/categories"),children:"View Details"})]}),(0,a.jsxs)("div",{className:"bg-green-600 text-white rounded-lg p-4 shadow",children:[(0,a.jsx)("div",{className:"text-sm",children:"Total Notes"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:t.length}),(0,a.jsx)("div",{className:"mt-2 text-sm underline cursor-pointer",onClick:()=>e.push("/notes"),children:"View Details"})]}),(0,a.jsxs)("div",{className:"bg-orange-600 text-white rounded-lg p-4 shadow",children:[(0,a.jsx)("div",{className:"text-sm",children:"Last Week Notes"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:y.length}),(0,a.jsx)("div",{className:"mt-2 text-sm underline cursor-pointer",onClick:()=>e.push("/notes"),children:"View Details"})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h2",{className:"font-semibold",children:"Recently Added Notes"}),(0,a.jsx)("button",{onClick:()=>{p(null),h(!0)},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"+ Add Note"})]}),d&&(0,a.jsx)("p",{className:"text-red-600 p-4",children:d}),(0,a.jsx)(c.Z,{entries:t,entriesPerSlide:8,onEdit:e=>{p(e),h(!0)},onDelete:e=>{w(e),C(!0)}})]}),v&&(0,a.jsx)("div",{className:"fixed inset-0 z-10 bg-black/10 flex items-center justify-center bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-80 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Confirm Delete"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this note?"}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>C(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),(0,a.jsx)("button",{onClick:async()=>{j&&(await deleteEntry(j),w(null)),C(!1)},className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700",children:"Delete"})]})]})}),(0,a.jsx)(i.Z,{open:u,onClose:()=>{h(!1),p(null)},onSubmit:saveEntry,entry:x,categories:m})]})]})})}}},function(e){e.O(0,[184,774,888,179],function(){return e(e.s=81840)}),_N_E=e.O()}]);