(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{20569:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/entries/[id]",function(){return n(62764)}])},62764:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return EntryPage}});var a=n(85893),s=n(11163),c=n(67294);function EntryPage(){let e=(0,s.useRouter)(),{id:t}=e.query,[n,i]=(0,c.useState)(null),[r,l]=(0,c.useState)(!1),[d,o]=(0,c.useState)(""),[u,p]=(0,c.useState)("");async function fetchEntry(){let n=await fetch("".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/").concat(t),{credentials:"include"});if(401===n.status)return e.push("/");if(!n.ok)return;let a=await n.json();i(a),o(a.title),p(a.content)}async function save(){let e=await fetch("".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/").concat(t),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:d,content:u})});e.ok&&(l(!1),fetchEntry())}async function del(){confirm("delete?")&&(await fetch("$\n{process.env.NEXT_PUBLIC_API_BASE}/entries/".concat(t),{method:"DELETE",credentials:"include"}),e.push("/dashboard"))}return((0,c.useEffect)(()=>{t&&fetchEntry()},[t]),n)?(0,a.jsx)("main",{className:"max-w-3xl mx-auto mt-8 p-4 bg-white shadow rounded",children:r?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{className:"w-full border rounded px-3 py-2",value:d,onChange:e=>o(e.target.value)}),(0,a.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:10,value:u,onChange:e=>p(e.target.value)}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:save,className:"px-3 py-2 bg-indigo-600 text-white rounded",children:"Save"}),(0,a.jsx)("button",{onClick:()=>l(!1),className:"px-3 py-2 bggray-200 rounded",children:"Cancel"})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:n.title}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:new Date(n.created_at).toLocaleString()}),(0,a.jsx)("p",{className:"mt-3",children:n.content}),(0,a.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>l(!0),className:"px-3 py-2 bgyellow-400 rounded",children:"Edit"}),(0,a.jsx)("button",{onClick:del,className:"px-3 py-2 bg-red-500 text-white   rounded",children:"Delete"})]})]})}):(0,a.jsx)("div",{className:"max-w-3xl mx-auto mt-8",children:"Loading..."})}},11163:function(e,t,n){e.exports=n(59974)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=20569)}),_N_E=e.O()}]);