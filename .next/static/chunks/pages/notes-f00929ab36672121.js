(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[397],{21915:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notes",function(){return a(59385)}])},86629:function(e,t,a){"use strict";a.d(t,{Z:function(){return AddNoteModal}});var s=a(85893),l=a(67294),n=a(34371),components_CategoryDropdown=e=>{let{value:t,onChange:a,className:r=""}=e,[c,o]=(0,l.useState)([]),[i,d]=(0,l.useState)("");(0,l.useEffect)(()=>{let load=async()=>{try{let e=await fetch("".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/getCategory"),{credentials:"include"}),t=await e.json(),a=new Set(t.map(e=>e.category).filter(Boolean));o([...a]),console.log("setCategoriessetCategoriessetCategories",o)}catch(e){console.error("Error loading categories:",e)}};load()},[]);let u=[...c.map(e=>({value:e,label:e})),{value:"custom",label:"Custom"}];return(0,s.jsxs)("div",{className:"w-full ".concat(r),children:[(0,s.jsx)(n.ZP,{classNamePrefix:"react-select",placeholder:"Select or search category",options:u,value:c.includes(t)?{value:t,label:t}:t?{value:"custom",label:"Custom"}:null,onChange:e=>{"custom"===e.value?a(i):a(e.value)},isSearchable:!0,styles:{control:e=>({...e,borderRadius:"0.375rem",padding:"2px 4px"})}}),!c.includes(t)&&t&&(0,s.jsx)("input",{type:"text",placeholder:"Enter custom category",className:"mt-2 w-full border px-3 py-2 rounded",value:i||t,onChange:e=>{d(e.target.value),a(e.target.value)}})]})};function AddNoteModal(e){let{open:t,onClose:a,onSubmit:n,entry:r,categories:c=[]}=e,[o,i]=(0,l.useState)(""),[d,u]=(0,l.useState)(""),[x,h]=(0,l.useState)("");if((0,l.useEffect)(()=>{r?(i(r.title||""),u(r.category||""),h(r.content||"")):(i(""),u(""),h(""))},[r]),!t)return null;function handleSave(e){e.preventDefault(),n({title:o,category:d,content:x})}return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white w-full max-w-md rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:r?"Edit Note":"Add Note"}),(0,s.jsxs)("form",{onSubmit:handleSave,children:[(0,s.jsx)("input",{className:"w-full border px-3 py-2 mb-4 rounded",placeholder:"Note Title",value:o,onChange:e=>i(e.target.value)}),(0,s.jsx)(components_CategoryDropdown,{value:d,onChange:u}),(0,s.jsx)("textarea",{className:"w-full border px-3 py-2 mb-4 rounded",rows:4,placeholder:"Write your note content...",value:x,onChange:e=>h(e.target.value)}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-2",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",children:r?"Update":"Save"})]})]})]})})}},16837:function(e,t,a){"use strict";var s=a(85893),l=a(11163);t.Z=()=>{let e=(0,l.useRouter)();return(0,s.jsxs)("aside",{className:"w-64 bg-white  relative z-10",children:[(0,s.jsx)("div",{className:"px-6 py-4 text-xl font-bold border-b",children:"e-Diary MS"}),(0,s.jsxs)("nav",{className:"p-4 space-y-2",children:[(0,s.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100 font-medium",children:"Dashboard"}),(0,s.jsx)("button",{onClick:()=>e.push("/categories"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100",children:"Categories"}),(0,s.jsx)("button",{onClick:()=>e.push("/notes"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100",children:"Notes"}),(0,s.jsx)("div",{className:"pt-4 border-t text-sm text-gray-500",children:"PROFILE SETTINGS"}),(0,s.jsx)("button",{onClick:()=>e.push("/changePassword"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100",children:"Change Password"}),(0,s.jsx)("button",{onClick:()=>e.push("/myProfile"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100",children:"My Profile"}),(0,s.jsx)("button",{onClick:()=>e.push("/"),className:"block w-full text-left px-3 py-2 rounded hover:bg-gray-100",children:"Logout"})]})]})}},56888:function(e,t,a){"use strict";a.d(t,{Z:function(){return TableSlider}});var s=a(85893),l=a(67294);function TableSlider(e){let{entries:t,entriesPerSlide:a=5,onEdit:n,onDelete:r}=e,[c,o]=(0,l.useState)(0),i=Math.ceil(t.length/a),d=c*a,u=d+a,x=t.slice(d,u);return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow mt-4",children:[(0,s.jsxs)("table",{className:"w-full text-left text-sm min-w-[800px] border-separate border-spacing-0l",children:[(0,s.jsx)("thead",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-t-xl",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2",children:"#"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Note Title"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Category"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Content"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Creation Date"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Action"})]})}),(0,s.jsxs)("tbody",{children:[x.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-2",children:d+t+1}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.title}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.category||"-"}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.content||"-"}),(0,s.jsx)("td",{className:"px-4 py-2",children:new Date(e.created_at).toLocaleString("en-PK",{timeZone:"Asia/Karachi"})}),(0,s.jsxs)("td",{className:"px-4 py-2 space-x-2",children:[(0,s.jsx)("button",{onClick:()=>n(e),className:"px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"View"}),(0,s.jsx)("button",{onClick:()=>r(e.id),className:"px-3 py-1 bg-red-500 text-white rounded text-xs",children:"Delete"})]})]},e.id)),0===t.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"6",className:"px-4 py-6 text-center text-gray-500",children:"No entries found."})})]})]}),t.length>a&&(0,s.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,s.jsx)("button",{onClick:()=>o(e=>Math.max(e-1,0)),disabled:0===c,className:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50",children:"Previous"}),(0,s.jsxs)("span",{children:["Slide ",c+1," of ",i]}),(0,s.jsx)("button",{onClick:()=>o(e=>Math.min(e+1,i-1)),disabled:c===i-1,className:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50",children:"Next"})]})]})}},59385:function(e,t,a){"use strict";a.r(t);var s=a(85893),l=a(16837),n=a(67294),r=a(11163),c=a(86629),o=a(56888);t.default=()=>{let e=(0,r.useRouter)(),[t,a]=(0,n.useState)([]),[i,d]=(0,n.useState)(""),[u,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null),[m,y]=(0,n.useState)([]),[g,b]=(0,n.useState)([]),[f,j]=(0,n.useState)([]),[N,w]=(0,n.useState)(null),[v,C]=(0,n.useState)(!1);async function load(){try{let t=await fetch("".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/"),{credentials:"include"});if(401===t.status)return e.push("/");let s=await t.json();a(s)}catch(e){d(String(e))}}async function saveEntry(e){let t=h?"".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/").concat(h.id):"".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/EntryData"),a=await fetch(t,{method:h?"PATCH":"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok)await load(),x(!1),p(null);else{let e=await a.json().catch(()=>({}));alert(e.detail||"Error")}}async function deleteEntry(e){try{let t=await fetch("".concat("https://ediary-management-system-production-ed2f.up.railway.app","/entries/").concat(e),{method:"DELETE",credentials:"include"});t.ok&&await load()}catch(e){d(String(e))}}return(0,n.useEffect)(()=>{load()},[]),(0,s.jsx)("div",{className:"min-h-screen bg-[url('/images/dashboard/dashboard_back.png')] bg-no-repeat bg-cover",children:(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsx)(l.Z,{}),(0,s.jsxs)("main",{className:"flex-1 p-6 relative z-10",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold mb-4 text-black drop-shadow",children:"Notes"}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Recently Added Notes"}),(0,s.jsx)("button",{onClick:()=>{p(null),x(!0)},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"+ Add Note"})]}),i&&(0,s.jsx)("p",{className:"text-red-600 p-4",children:i}),(0,s.jsx)(o.Z,{entries:t,entriesPerSlide:8,onEdit:e=>{p(e),x(!0)},onDelete:e=>{w(e),C(!0)}})]}),v&&(0,s.jsx)("div",{className:"fixed inset-0 z-10 bg-black/10 flex items-center justify-center bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-80 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Confirm Delete"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this note?"}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>C(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),(0,s.jsx)("button",{onClick:async()=>{N&&(await deleteEntry(N),w(null)),C(!1)},className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700",children:"Delete"})]})]})}),(0,s.jsx)(c.Z,{open:u,onClose:()=>{x(!1),p(null)},onSubmit:saveEntry,entry:h,categories:m})]})]})})}}},function(e){e.O(0,[184,774,888,179],function(){return e(e.s=21915)}),_N_E=e.O()}]);